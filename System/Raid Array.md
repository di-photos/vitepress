# NAS系统相关 | 常见的RAID阵列

对于接触NAS的同学来说，如何选择磁盘的阵列模式是在前期要考虑的重点因素，如下表格是常见RAID阵列的主要特点：

![Raid.jpg](https://pic.nas-u.top/1761955246.jpg)
*读性能：RAID阵列的数据读取性能*
*写性能：RAID阵列的数据写入性能*
*数据冗余：是否提供数据冗余保护*
*容错硬盘数：RAID阵列能够容忍的最大硬盘故障数量*
*存储效率：实际可用存储空间占总硬盘容量的比例*
*成本：相对成本，包括硬件和维护等方面*
*最小磁盘数：构建该RAID级别所需的最少硬盘数量*
*存储空间：以1表示单盘存储空间，n个存储盘时的有效存储空间*
*应用场景：适用的场景和需求*

注：所有的RAID阵列读写性能的提升主要是阵列的顺序读写性能，并不能提升阵列的随机读写性能。

### 镜像、条带化与数据校验

想要了解每个具体的RAID阵列，我们需要明确以下三个概念：即镜像、条带化和数据校验。

**镜像（Mirroring）：**

镜像是一种数据保护技术，它通过在两个或更多的硬盘上创建数据的完全副本来实现。在RAID中，RAID 1是典型的使用镜像技术的级别。镜像技术的主要优点是提供了较高的数据安全性，因为当某个硬盘发生故障时，系统可以从另一个硬盘上的副本中读取数据。同时，镜像技术也能提高读取性能，因为数据可以从多个硬盘同时读取。然而，镜像技术的缺点是存储效率较低，因为每个硬盘上都存有完全相同的数据。

**条带化（Striping）：**

条带化是一种将数据分割成多个部分并在多个硬盘上存储的技术。在RAID中，**RAID 0是典型的使用条带化技术的级别**。条带化技术的主要优点是能提高数据读写性能，因为数据可以在多个硬盘上同时读取或写入。然而，条带化技术的缺点是不提供数据冗余保护，因此如果某个硬盘发生故障，可能会导致整个阵列中的数据丢失。

**数据校验（Parity）：**

**数据校验是一种通过计算校验信息并将其存储在硬盘上的技术**，用于在硬盘发生故障时恢复丢失的数据。在RAID中，RAID 5和RAID 6是典型的使用数据校验技术的级别。数据校验技术的主要优点是能提供一定程度的数据冗余保护，同时保持较高的存储效率。当某个硬盘发生故障时，系统可以根据校验信息从其他硬盘上恢复丢失的数据。然而，数据校验技术对性能有一定影响，特别是在写入数据时需要计算和写入校验信息。

### RAID 0（条带化）

RAID 0通过将数据分割成等大小的块（条带），并在多个硬盘上进行分布，从而提高数据的读写速度。但由于RAID 0不提供数据冗余，因此在某个硬盘发生故障时，整个阵列的数据将丢失。适用于对性能要求较高，但数据安全性要求不高的场景。

简单来说，假设有n块相同的硬盘，RAID0就是把你的数据分割成n个部分，同时对多个硬盘进行读写，这样理论上RAID0的顺序读写速度就是n倍于该硬盘的理论速度。

![Raid 0.png](https://pic.nas-u.top/3334629048.png)

### RAID 1（镜像）

RAID 1将数据在两个或多个硬盘上进行完全复制。这种策略提供了较高的数据安全性，但存储效率较低，适用于对数据安全性要求较高的场景。

简单来说，假设有n块相同的硬盘，RAID1就是把你的数据在n块硬盘上同时存储一份，这样，只要你的n块硬盘有一块还完好，就可以读取到完整无误的数据。

![Raid 1.png](https://pic.nas-u.top/1751686721.png)

### RAID 5（分布式奇偶校验）

RAID 5在多个硬盘上分布存储数据和奇偶校验信息。当某个硬盘发生故障时，可以通过其他硬盘上的数据和校验信息恢复丢失的数据。RAID 5在提供数据冗余的同时，也具有较好的存储效率。适用于对数据安全性和性能要求较高的场景。

**RAID 5是我们目前在家用上用到的最多的RAID阵列**，毕竟大部分品牌NAS的家用级的产品均以四盘位机型为主流。RAID 5阵列可以最大程度上帮助用户在数据安全和存储容量上做好平衡。

![Raid 5.png](https://pic.nas-u.top/459319314.png)

### RAID 6（双重奇偶校验）

RAID 6在RAID 5的基础上增加一层额外的奇偶校验信息，从而提高数据的安全性和容错能力。RAID 6可以应对最多两块硬盘同时发生故障的情况。适用于对数据安全性要求极高的场景。

![Raid 6.png](https://pic.nas-u.top/4170854869.png)

### RAID 10（RAID 1+0，镜像+条带化）

RAID 10将RAID 1和RAID 0的优点结合起来，即在提供数据镜像冗余的同时，还能实现数据的条带化分布，从而提高性能。RAID 10适用于对性能和数据安全性要求较高的场景。

![Raid 10.png](https://pic.nas-u.top/1548904275.png)

在日常生活中，想要使用RAID10阵列也必须是四盘位起步，而且大部分NAS系统并不支持RAID10阵列，这个时候我们一般需要用到 **阵列卡** 来组成RAID10阵列。

### SHR（群晖）

Synology Hybrid RAID（SHR）是 群晖 的自动 RAID 管理系统，与RAID5 类似。但SHR 可让用户创建具有优化容量和性能的灵活存储解决方案。
一般而言，传统 RAID 的存储创建基于存储池中最小的硬盘。如下图所示，如果传统 RAID 存储池中的最小硬盘为 500 GB，则存储池中的所有其他硬盘各自只能提供 500 GB 空间。因此，存储池最终有 2 TB 的可用存储和 4.5 TB 的浪费存储。

![Classic RAID.png](https://pic.nas-u.top/844037216.png)

与传统 RAID 不同，SHR 将每个硬盘的存储空间分成较小的块，并创建额外的冗余存储。使用与之前相同的示例，SHR 能够将 4.5 TB 的不可用存储分成较小的可用块，并尽可能地增加每个硬盘的存储容量。

![SHR.png](https://pic.nas-u.top/3378301846.png)

**建议：如果是 群晖系统 建议直接用其SHR阵列模式，在空间利用率上更高。**

了解不同RAID级别的特点和适用场景，可以帮助你根据实际需求选择合适的RAID阵列配置。在选择时，需要权衡性能、数据安全性和存储效率等因素，以实现最佳的存储解决方案。